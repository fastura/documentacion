"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[94211],{28453:(e,i,r)=>{r.d(i,{R:()=>c,x:()=>l});var a=r(296540);const s={},n=a.createContext(s);function c(e){const i=a.useContext(n);return a.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),a.createElement(n.Provider,{value:i},e.children)}},130981:(e,i,r)=>{r.r(i),r.d(i,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"Devs/instalacion/Actualizar-Migrar","title":"Gu\xeda para Actualizar o Migrar el Sistema","description":"\u26a0\ufe0f Migraci\xf3n de Servidor GitLab","source":"@site/versioned_docs/version-Pro7/Devs/instalacion/05-Actualizar-Migrar.md","sourceDirName":"Devs/instalacion","slug":"/Devs/instalacion/Actualizar-Migrar","permalink":"/Pro7/Devs/instalacion/Actualizar-Migrar","draft":false,"unlisted":false,"editUrl":"https://github.com/fastura/documentacion/tree/main/versioned_docs/version-Pro7/Devs/instalacion/05-Actualizar-Migrar.md","tags":[],"version":"Pro7","lastUpdatedBy":"Jean-Zapata","lastUpdatedAt":1755301645000,"sidebarPosition":5,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Instalar - Actualizar el SSL","permalink":"/Pro7/Devs/instalacion/Instalar-SSL"},"next":{"title":"Mozo en cPanel","permalink":"/Pro7/Devs/instalacion/Instalacion-Mozo-cPanel"}}');var s=r(474848),n=r(28453);const c={},l="Gu\xeda para Actualizar o Migrar el Sistema",o={},d=[{value:"\u26a0\ufe0f Migraci\xf3n de Servidor GitLab",id:"\ufe0f-migraci\xf3n-de-servidor-gitlab",level:2},{value:"\ud83d\udccb Pre Requisitos",id:"-pre-requisitos",level:2},{value:"1. Conexi\xf3n al Servidor",id:"1-conexi\xf3n-al-servidor",level:2},{value:"1.1 Acceso por SSH",id:"11-acceso-por-ssh",level:3},{value:"1.2 Verificar contenedores activos",id:"12-verificar-contenedores-activos",level:3},{value:"1.3 Acceder al contenedor FPM",id:"13-acceder-al-contenedor-fpm",level:3},{value:"2. Preparaci\xf3n del Entorno",id:"2-preparaci\xf3n-del-entorno",level:2},{value:"2.1 Verificar estado del repositorio",id:"21-verificar-estado-del-repositorio",level:3},{value:"2.2 Guardar cambios locales (si los hay)",id:"22-guardar-cambios-locales-si-los-hay",level:3},{value:"2.3 Verificar la URL del repositorio remoto",id:"23-verificar-la-url-del-repositorio-remoto",level:3},{value:"3. Actualizaci\xf3n Est\xe1ndar",id:"3-actualizaci\xf3n-est\xe1ndar",level:2},{value:"3.1 Descargar cambios",id:"31-descargar-cambios",level:3},{value:"3.2 Recuperar cambios guardados (si aplicaste stash)",id:"32-recuperar-cambios-guardados-si-aplicaste-stash",level:3},{value:"3.3 Aplicar migraciones y optimizaciones",id:"33-aplicar-migraciones-y-optimizaciones",level:3},{value:"4. Migraci\xf3n de Pro6 a Pro7",id:"4-migraci\xf3n-de-pro6-a-pro7",level:2},{value:"4.1 Respaldo de seguridad",id:"41-respaldo-de-seguridad",level:3},{value:"4.2 Verificar requisitos del sistema",id:"42-verificar-requisitos-del-sistema",level:3},{value:"4.3 Proceso de migraci\xf3n",id:"43-proceso-de-migraci\xf3n",level:3},{value:"4.4 Verificaci\xf3n post-migraci\xf3n",id:"44-verificaci\xf3n-post-migraci\xf3n",level:3},{value:"5. Soluci\xf3n de Problemas Comunes",id:"5-soluci\xf3n-de-problemas-comunes",level:2},{value:"Conflictos de merge",id:"conflictos-de-merge",level:3},{value:"Problemas de permisos",id:"problemas-de-permisos",level:3},{value:"Errores de dependencias",id:"errores-de-dependencias",level:3},{value:"6. Buenas Pr\xe1cticas y Recomendaciones",id:"6-buenas-pr\xe1cticas-y-recomendaciones",level:2},{value:"\u2705 Hacer siempre",id:"-hacer-siempre",level:3},{value:"\u26a0\ufe0f Precauciones",id:"\ufe0f-precauciones",level:3},{value:"\ud83d\udeab Evitar",id:"-evitar",level:3}];function t(e){const i={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"gu\xeda-para-actualizar-o-migrar-el-sistema",children:"Gu\xeda para Actualizar o Migrar el Sistema"})}),"\n",(0,s.jsx)(i.h2,{id:"\ufe0f-migraci\xf3n-de-servidor-gitlab",children:"\u26a0\ufe0f Migraci\xf3n de Servidor GitLab"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Hemos migrado nuestro servidor de GitLab."})," Si a\xfan no has actualizado la URL del repositorio, te recomendamos verificar y cambiar la configuraci\xf3n antes de continuar."]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Nueva URL:"})," ",(0,s.jsx)(i.code,{children:"git.buho.la"})]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"-pre-requisitos",children:"\ud83d\udccb Pre Requisitos"}),"\n",(0,s.jsx)(i.p,{children:"Antes de comenzar, aseg\xfarate de tener:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Acceso SSH al servidor"}),"\n",(0,s.jsx)(i.li,{children:"Credenciales v\xe1lidas de GitLab (usuario y token)"}),"\n",(0,s.jsx)(i.li,{children:"Permisos para ejecutar comandos Docker"}),"\n",(0,s.jsx)(i.li,{children:"Una suscripci\xf3n activa para migrar de Pro6 a Pro7"}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"1-conexi\xf3n-al-servidor",children:"1. Conexi\xf3n al Servidor"}),"\n",(0,s.jsx)(i.h3,{id:"11-acceso-por-ssh",children:"1.1 Acceso por SSH"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"ssh [usuario]@[ip]\n"})}),"\n",(0,s.jsx)(i.h3,{id:"12-verificar-contenedores-activos",children:"1.2 Verificar contenedores activos"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"docker ps\n"})}),"\n",(0,s.jsx)(i.h3,{id:"13-acceder-al-contenedor-fpm",children:"1.3 Acceder al contenedor FPM"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"docker exec -it [nombre_contenedor_fpm] /bin/bash\n"})}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"2-preparaci\xf3n-del-entorno",children:"2. Preparaci\xf3n del Entorno"}),"\n",(0,s.jsxs)(i.blockquote,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"\ud83d\udca1 Tip:"})," Antes de actualizar, siempre revisa si tienes cambios locales para evitar conflictos."]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"21-verificar-estado-del-repositorio",children:"2.1 Verificar estado del repositorio"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"git status\n"})}),"\n",(0,s.jsx)(i.h3,{id:"22-guardar-cambios-locales-si-los-hay",children:"2.2 Guardar cambios locales (si los hay)"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"git stash\n"})}),"\n",(0,s.jsx)(i.h3,{id:"23-verificar-la-url-del-repositorio-remoto",children:"2.3 Verificar la URL del repositorio remoto"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"git remote -v\n"})}),"\n",(0,s.jsx)(i.p,{children:"Si necesitas actualizar la URL:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"git remote set-url origin https://git.buho.la/facturaloperu/facturador/pro7.git\n"})}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"3-actualizaci\xf3n-est\xe1ndar",children:"3. Actualizaci\xf3n Est\xe1ndar"}),"\n",(0,s.jsx)(i.h3,{id:"31-descargar-cambios",children:"3.1 Descargar cambios"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"git pull origin main\n"})}),"\n",(0,s.jsxs)(i.blockquote,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"\u2139\ufe0f Nota:"})," Si se solicitan credenciales, ingresa tu usuario y token de GitLab."]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"32-recuperar-cambios-guardados-si-aplicaste-stash",children:"3.2 Recuperar cambios guardados (si aplicaste stash)"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"git stash apply\n"})}),"\n",(0,s.jsx)(i.h3,{id:"33-aplicar-migraciones-y-optimizaciones",children:"3.3 Aplicar migraciones y optimizaciones"}),"\n",(0,s.jsx)(i.p,{children:"Puedes ejecutar los comandos individualmente:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"php artisan migrate\r\nphp artisan tenancy:migrate\r\nphp artisan config:cache\r\nphp artisan cache:clear\r\nphp artisan optimize:clear\n"})}),"\n",(0,s.jsx)(i.p,{children:"O ejecutarlos en una sola l\xednea:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"php artisan migrate && php artisan tenancy:migrate && php artisan config:cache && php artisan cache:clear && php artisan optimize:clear\n"})}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"4-migraci\xf3n-de-pro6-a-pro7",children:"4. Migraci\xf3n de Pro6 a Pro7"}),"\n",(0,s.jsxs)(i.blockquote,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"\u26a0\ufe0f Importante:"})," Debes tener una ",(0,s.jsx)(i.strong,{children:"suscripci\xf3n activa"})," para realizar esta migraci\xf3n. Si tu suscripci\xf3n no est\xe1 vigente, contacta al \xe1rea comercial antes de continuar."]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"41-respaldo-de-seguridad",children:"4.1 Respaldo de seguridad"}),"\n",(0,s.jsx)(i.p,{children:"Antes de migrar, realiza copias de seguridad de:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Base de datos completa"}),"\n",(0,s.jsx)(i.li,{children:"Archivos del sistema Pro6"}),"\n",(0,s.jsx)(i.li,{children:"Configuraciones personalizadas"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"42-verificar-requisitos-del-sistema",children:"4.2 Verificar requisitos del sistema"}),"\n",(0,s.jsx)(i.p,{children:"Confirma que tu servidor cumple con:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Versi\xf3n m\xednima de PHP requerida"}),"\n",(0,s.jsx)(i.li,{children:"Extensiones PHP necesarias"}),"\n",(0,s.jsx)(i.li,{children:"Recursos de memoria y almacenamiento"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"43-proceso-de-migraci\xf3n",children:"4.3 Proceso de migraci\xf3n"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"Cambiar repositorio remoto:"})}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"git remote set-url origin https://git.buho.la/facturaloperu/facturador/pro7.git\n"})}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"Verificar configuraci\xf3n:"})}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"git remote -v\n"})}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"Realizar migraci\xf3n completa:"})}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"git status\r\ngit add .\r\ngit stash\r\ngit pull origin main\r\ngit reset --hard origin/main\r\ngit stash apply\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"44-verificaci\xf3n-post-migraci\xf3n",children:"4.4 Verificaci\xf3n post-migraci\xf3n"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Confirma que todos los datos se migraron correctamente"}),"\n",(0,s.jsx)(i.li,{children:"Verifica el funcionamiento de las principales funcionalidades"}),"\n",(0,s.jsx)(i.li,{children:"Revisa y ajusta configuraciones seg\xfan tus necesidades"}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"5-soluci\xf3n-de-problemas-comunes",children:"5. Soluci\xf3n de Problemas Comunes"}),"\n",(0,s.jsx)(i.h3,{id:"conflictos-de-merge",children:"Conflictos de merge"}),"\n",(0,s.jsxs)(i.p,{children:["Si encuentras conflictos durante ",(0,s.jsx)(i.code,{children:"git pull"}),":"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:'git status                    # Ver archivos en conflicto\r\n# Resuelve manualmente los conflictos\r\ngit add .                     # Agregar cambios resueltos\r\ngit commit -m "Resolver conflictos de merge"\n'})}),"\n",(0,s.jsx)(i.h3,{id:"problemas-de-permisos",children:"Problemas de permisos"}),"\n",(0,s.jsx)(i.p,{children:"Si tienes problemas de permisos:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"sudo chown -R www-data:www-data storage/\r\nsudo chmod -R 755 storage/\n"})}),"\n",(0,s.jsx)(i.h3,{id:"errores-de-dependencias",children:"Errores de dependencias"}),"\n",(0,s.jsx)(i.p,{children:"Para actualizar dependencias:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"composer update --no-dev\r\nnpm install && npm run production\n"})}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"6-buenas-pr\xe1cticas-y-recomendaciones",children:"6. Buenas Pr\xe1cticas y Recomendaciones"}),"\n",(0,s.jsx)(i.h3,{id:"-hacer-siempre",children:"\u2705 Hacer siempre"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Crear respaldos antes de cualquier migraci\xf3n"}),"\n",(0,s.jsx)(i.li,{children:"Revisar logs de error durante el proceso"}),"\n",(0,s.jsx)(i.li,{children:"Probar funcionalidades cr\xedticas despu\xe9s de actualizar"}),"\n",(0,s.jsx)(i.li,{children:"Documentar cambios personalizados"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"\ufe0f-precauciones",children:"\u26a0\ufe0f Precauciones"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["El comando ",(0,s.jsx)(i.code,{children:"git reset --hard origin/main"})," eliminar\xe1 ",(0,s.jsx)(i.strong,{children:"todos"})," los cambios locales no guardados"]}),"\n",(0,s.jsxs)(i.li,{children:["Siempre usar ",(0,s.jsx)(i.code,{children:"git stash"})," para preservar trabajo no confirmado"]}),"\n",(0,s.jsx)(i.li,{children:"Verificar permisos de archivos despu\xe9s de actualizaciones"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"-evitar",children:"\ud83d\udeab Evitar"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Actualizar en horarios de alta demanda"}),"\n",(0,s.jsx)(i.li,{children:"Saltar el proceso de respaldo"}),"\n",(0,s.jsx)(i.li,{children:"Ignorar mensajes de advertencia"}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,n.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}}}]);